<%
  # app/views/triggeractions/forms/801/_index.html.erb
  #
  # Example:
  #   render partial: 'triggeractions/forms/801/index', locals: { triggeraction: Triggeraction }
  #
  # Required Instance Variables:
  #   none
  #
  # Required Local Variables:
  #   none
  #
  disabled = triggeraction.campaign.marketplace
  current_clients_selected = Client.where(id: triggeraction.clients.pluck('client_id')).order(:name)
-%>
<div class="table-responsive">
  <table class="table">

    <thead>
      <tr>
        <th colspan="3" style="min-width: 240px"> Client </th>
        <th class="text-center"> Contacts Each Mo. </th>
        <th class="text-center"> Contacts This Mo. </th>
        <th class="text-left"> Period Ends </th>
        <th style="width:100px;min-width:100px;"></th>
      </tr>
    </thead>

    <tbody>
      <% if current_clients_selected.any? %>
        <%= render partial: 'triggeractions/forms/801/client', collection: current_clients_selected, as: :client, locals: { triggeraction:, clients: triggeraction.clients, disabled: } -%>
      <% else %>
        <tr>
          <td colspan="6">
            Clients have not been selected yet.
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
